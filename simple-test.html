<!DOCTYPE html>
<html>
<head>
    <title>Simple TimeFlow Card Test</title>
    <script type="module" src="./timeflow-card-beta.js"></script>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
            background: #1a1a1a;
            color: white;
        }
        .card-container {
            max-width: 400px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Simple TimeFlow Card Test</h1>
    
    <p>Hover over the card - cursor should change to pointer. Click the card - should trigger more-info action.</p>
    
    <div class="card-container">
        <timeflow-card-beta></timeflow-card-beta>
    </div>

    <script>
        // Mock hass object with timer entity
        const mockHass = {
            language: 'en',
            states: {
                'timer.countdown_timer': {
                    entity_id: 'timer.countdown_timer',
                    state: 'active',
                    attributes: {
                        friendly_name: 'Countdown Timer',
                        duration: '00:05:00',
                        finishes_at: new Date(Date.now() + 300000).toISOString()
                    }
                }
            },
            localize: (key) => key,
            formatTime: (time) => new Date(time).toLocaleTimeString(),
            formatDate: (date) => new Date(date).toLocaleDateString(),
            callService: (domain, service, data) => {
                console.log(`Calling service: ${domain}.${service}`, data);
            }
        };

        // Configure card
        window.addEventListener('DOMContentLoaded', () => {
            const card = document.querySelector('timeflow-card-beta');
            card.hass = mockHass;
            card.setConfig({
                type: 'custom:timeflow-card-beta',
                timer_entity: 'timer.countdown_timer', // Using timer_entity field (our format)
                title: 'Countdown Timer',
                target_date: new Date(Date.now() + 300000).toISOString(), // 5 minutes from now
                show_progress_text: true
            });

            // Listen for action events
            card.addEventListener('hass-action', (event) => {
                console.log('Action event triggered:', event.detail);
                alert(`Action triggered: ${event.detail.action}\nConfig: ${JSON.stringify(event.detail.config, null, 2)}`);
            });
        });
    </script>
</body>
</html>
